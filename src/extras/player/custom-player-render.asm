CharacterOne_Frames:
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $0a
	.db $0E ; $0b
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $16
	.db $0E ; $17
	.db $10 ; $18
	.db $12 ; $19
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
CharacterTwo_Frames:
	.db $00
	.db $02
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $02
	.db $0E ; $03
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $02
	.db $0E ; $03
	.db $3c ; $02
	.db $3e ; $03
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
CharacterTre_Frames:
	.db $00
	.db $02
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $0a
	.db $0E ; $0b
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $16
	.db $0E ; $17
	.db $10 ; $18
	.db $12 ; $19
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
CharacterFour_Frames:
	.db $00
	.db $02
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $0a
	.db $0E ; $0b
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $16
	.db $0E ; $17
	.db $3c ; $18
	.db $3e ; $19
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01

CharacterOne_FramesSmall:
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $0a
	.db $0E ; $0b
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $16
	.db $0E ; $17
	.db $10 ; $18
	.db $12 ; $19
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
CharacterTwo_FramesSmall:
	.db $00
	.db $02
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $02
	.db $0E ; $03
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $02
	.db $0E ; $03
	.db $3c ; $02
	.db $3e ; $03
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
CharacterTre_FramesSmall:
	.db $00
	.db $02
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $0a
	.db $0E ; $0b
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $16
	.db $0E ; $17
	.db $10 ; $18
	.db $12 ; $19
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
CharacterFour_FramesSmall:
	.db $00
	.db $02
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01
	.db $0C ; $02
	.db $0E ; $03
	.db $10 ; $04
	.db $12 ; $05
	.db $00 ; $06
	.db $02 ; $07
	.db $08 ; $08
	.db $0A ; $09
	.db $0C ; $0a
	.db $0E ; $0b
	.db $14 ; $0c
	.db $16 ; $0d
	.db $FB ; $0e
	.db $FB ; $0f
	.db $2C ; $10
	.db $2C ; $11
	.db $FB ; $12
	.db $FB ; $13
	.db $2E ; $14
	.db $2E ; $15
	.db $0C ; $16
	.db $0E ; $17
	.db $10 ; $18
	.db $12 ; $19
	.db $30 ; $1a
	.db $30 ; $1b
	.db $32 ; $1c
	.db $32 ; $1d
	.db $20 ; $1e
	.db $22 ; $1f
	.db $24 ; $20
	.db $26 ; $21
	.db $00 ; $22
	.db $02 ; $23
	.db $28 ; $24
	.db $2A ; $25
	.db $18 ; $26
	.db $1A ; $27
	.db $1C ; $28
	.db $1E ; $29
	.db $00 ; $2a
	.db $02 ; $2b
	.db $04 ; $00 - start of relative character tile offets, for some reason
	.db $06 ; $01

; bit string
; FACING LEFT
; inverse, NONE, extraframe1, extraframe2, bottom right, top right, bottom left, top left

CharacterOneMetaFrames:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; 
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000
    .db %00000000
CharacterTwoMetaFrames:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; Duck
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000
    .db %00000000
CharacterThreeMetaFrames:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; Duck
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000 
    .db %00000000
CharacterFourMetaFrames:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; Duck
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000
    .db %00000000
CharacterOneMetaFramesSmall:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; Duck
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000
    .db %00000000
CharacterTwoMetaFramesSmall:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; Duck
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000
    .db %00000000
CharacterThreeMetaFramesSmall:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; Duck
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000 
    .db %00000000
CharacterFourMetaFramesSmall:
    .db %00000000 ;; W
    .db %00000000 ;; Walk Carry
    .db %00000000 ;; S
    .db %00000000 ;; Stand Carry
    .db %00001100 ;; Duck
    .db %00001100 ;; 
    .db %00000000 ;; jump
    .db %00001100 ;; dead
    .db %00000000
    .db %00000000
    .db %00000000
    .db %00000000

CharacterStartTiles:
    .db $00
    .db $30
    .db $60
    .db $90
CharacterMetaStartTiles:
    .db $00
    .db $0c
    .db $18
    .db $24
CharacterFlipLookup:
    .db %0001
    .db %0100
    .db %0010
    .db %1000
    .db %0100
    .db %0001
    .db %1000
    .db %0010
CharacterExtraSheets:
    .db $3C
    .db $3E
    .db $3F
    .db $3D
CharacterExtraSheetsSmall:
    .db $80
    .db $82
    .db $83
    .db $81
;CHRBank_CharacterSize:
;	.db CHRBank_Mario
;	.db CHRBank_MarioSmall
;	.db CHRBank_Princess
;	.db CHRBank_PrincessSmall
;	.db CHRBank_Toad
;	.db CHRBank_ToadSmall
;	.db CHRBank_Luigi
;	.db CHRBank_LuigiSmall
ExtraFramesOne:
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
ExtraFramesTwo:
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
ExtraFramesTre:
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
ExtraFramesFor:
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB
	.db $FB, $FB

ApplyMetaInformation:
    LDX CurrentCharacter
    TYA
    PHA
    LDY PlayerDirection
    LDA PlayerAnimationFrame
	CMP #SpriteAnimation_Jumping
	BCS +
	ORA HoldingItem
+   CLC
    ADC CharacterMetaStartTiles, X
    LDY PlayerCurrentSize
    CPY #$0
    BEQ +
    CLC
    ADC #$30 ;; end of meta tiles 
+
    TAX
    LDY PlayerDirection
    LDA CharacterOneMetaFrames, X
    AND CharacterFlipLookup, Y
    BEQ +
	LDA SpriteDMAArea + $22
    EOR #$40
	STA SpriteDMAArea + $22
+
    LDA CharacterOneMetaFrames, X
    AND CharacterFlipLookup + 2, Y
    BEQ +
	LDA SpriteDMAArea + $2A
    EOR #$40
	STA SpriteDMAArea + $2A
+
    LDA CharacterOneMetaFrames, X
    AND CharacterFlipLookup + 4, Y
    BEQ +
	LDA SpriteDMAArea + $26
    EOR #$40
	STA SpriteDMAArea + $26
+
    LDA CharacterOneMetaFrames, X
    AND CharacterFlipLookup + 6, Y
    BEQ +
	LDA SpriteDMAArea + $2E
    EOR #$40
	STA SpriteDMAArea + $2E
+
    LDA CharacterOneMetaFrames, X
	STA ($c5)
    BPL +
    LDA CurrentCharacter
	LDX PlayerCurrentSize
	BEQ +o
	CLC
	ADC #$4
+o
	TAX
	LDA CharacterExtraSheets, X
	STA SpriteCHR1
    JMP ++
+   JSR LoadCharacterCHRBanks
++
    PLA
    TAY
    RTS

RenderSmallPlayer:
	LDA PlayerDirection
	BNE loc_BANKF_F44A_SMALL

	LDA SpriteDMAArea + $23
	STA SpriteDMAArea + 3, Y

    TXA
    CLC
	LDX CurrentCharacter
    ADC CharacterStartTiles, X
    TAX
	LDA CharacterOne_FramesSmall, X
	STA SpriteDMAArea + $21
	LDA CharacterOne_FramesSmall + 1, X
	STA SpriteDMAArea + $25

loc_BANKF_F43F_SMALL:
	LDA CharacterOne_FramesSmall + 2, X
	STA SpriteDMAArea + $29
	LDA CharacterOne_FramesSmall + 3, X
	BNE loc_BANKF_F478_SMALL

loc_BANKF_F44A_SMALL:
    TXA
    CLC
	LDX CurrentCharacter
    ADC CharacterStartTiles, X
    TAX
	LDA SpriteDMAArea + $27
	STA SpriteDMAArea + 3, Y
	LDA CharacterOne_FramesSmall + 1, X
	STA SpriteDMAArea + $21
	LDA CharacterOne_FramesSmall, X
	STA SpriteDMAArea + $25

loc_BANKF_F46F_SMALL:
	LDA CharacterOne_FramesSmall + 3, X
	STA SpriteDMAArea + $29
	LDA CharacterOne_FramesSmall + 2, X

loc_BANKF_F478_SMALL:
	STA SpriteDMAArea + $2D
;	LDA #$FB
;	STA SpriteDMAArea + $19
;	STA SpriteDMAArea + $1d
;	STA SpriteDMAArea + $18
;	STA SpriteDMAArea + $1C
    RTS

